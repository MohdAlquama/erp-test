import{J as A,r as s,j as e}from"./app-DVKDYkXn.js";import{A as D}from"./AdminLayout-xaFDPYzW.js";import{a as c}from"./axiosInstance-DbG8c_Wf.js";import{V as r}from"./index-Cz5qM-jY.js";import{L as E}from"./Loader-C4u9qc36.js";import{u as F}from"./adminContext-PWhikkwe.js";import{P as _}from"./plus-DVonVEYX.js";import"./menu-CmgxFT07.js";import"./createLucideIcon-V0M9PHiF.js";import"./search-CWxSpjiP.js";import"./bell-BPh2_WIZ.js";import"./user-0Ob6j4Ad.js";import"./x-BXpkOE8a.js";import"./house-CAgWt0V0.js";import"./users-DYTZw1Iw.js";import"./graduation-cap-DP4x_y6M.js";import"./file-text-BNaR_w6u.js";import"./settings-DfQ06Dqm.js";import"./log-out-mnJCr85j.js";import"./loader-circle-DwFdk6Mg.js";function I(){const{props:m}=A(),{adminId:P}=m,{admin:x}=F(),[a,n]=s.useState({name:"",location:"",logo:null}),[f,g]=s.useState(null),[w,d]=s.useState(!1),[b,N]=s.useState([]),[v,o]=s.useState(!0),[i,j]=s.useState(null),p=async()=>{try{o(!0);const t=await c.get(`/admin/${x.id}/colleges`);N(t.data||[])}catch{r.error("Failed to load colleges.")}finally{o(!1)}};s.useEffect(()=>{p()},[]);const u=t=>{const{name:l,value:S,files:y}=t.target;l==="logo"&&y.length>0?(n({...a,logo:y[0]}),g(URL.createObjectURL(y[0]))):n({...a,[l]:S})},h=()=>{n({name:"",location:"",logo:null}),g(null),j(null)},k=async t=>{if(t.preventDefault(),!a.name.trim()||!a.location.trim())return r.error("All fields are required.");try{o(!0);const l=new FormData;l.append("name",a.name),l.append("location",a.location),l.append("admin_id",x.id),a.logo&&l.append("logo",a.logo),i?(await c.post(`/admin/colleges/${i}?_method=PUT`,l,{headers:{"Content-Type":"multipart/form-data"}}),r.success("College updated successfully!")):(await c.post("/admin/colleges",l,{headers:{"Content-Type":"multipart/form-data"}}),r.success("College added successfully!")),h(),d(!1),await p()}catch{r.error("Failed to save college.")}finally{o(!1)}},C=t=>{n({name:t.name,location:t.location,logo:null}),g(t.logo_url||null),j(t.id),d(!0)},L=async t=>{if(confirm("Are you sure you want to delete this college?"))try{o(!0),await c.delete(`/admin/colleges/${t}`,{data:{admin_id:x.id}}),r.success("College deleted successfully!"),await p()}catch{r.error("Failed to delete college.")}finally{o(!1)}};return e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Colleges"}),e.jsxs("button",{onClick:()=>{h(),d(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"})," Add College"]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-800 dark:text-white",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Logo"}),e.jsx("th",{className:"px-4 py-2",children:"College Name"}),e.jsx("th",{className:"px-4 py-2",children:"Location"}),e.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-4 text-center",children:e.jsx(E,{message:"Loading colleges..."})})}):b.length>0?b.map(t=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsx("td",{className:"px-4 py-2",children:t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.name,className:"w-12 h-12 rounded object-cover"}):e.jsx("span",{className:"text-gray-400",children:"No Logo"})}),e.jsx("td",{className:"px-4 py-2",children:t.name}),e.jsx("td",{className:"px-4 py-2",children:t.location}),e.jsxs("td",{className:"px-4 py-2 flex gap-2",children:[e.jsx("button",{onClick:()=>C(t),className:"px-2 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),e.jsx("button",{onClick:()=>L(t.id),className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-4 text-center text-gray-500 dark:text-gray-400",children:"No colleges found."})})})]})}),e.jsxs("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[400px] bg-white dark:bg-gray-900 shadow-xl transition-transform duration-300 z-50 ${w?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:i?"Edit College":"Add College"}),e.jsx("button",{onClick:()=>{d(!1),h()},className:"text-gray-600 dark:text-gray-300 hover:text-red-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:k,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"College Name"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:u,required:!0,className:"w-full px-4 py-2 border rounded dark:bg-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:a.location,onChange:u,required:!0,className:"w-full px-4 py-2 border rounded dark:bg-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Logo"}),e.jsx("input",{type:"file",name:"logo",accept:"image/*",onChange:u,className:"w-full px-4 py-2 border rounded dark:bg-gray-800 dark:text-white"}),f&&e.jsx("img",{src:f,alt:"Preview",className:"mt-2 w-24 h-24 object-cover rounded"})]}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white w-full py-2 rounded hover:bg-indigo-700",children:i?"Update College":"Save College"})]})]})]})}I.layout=m=>e.jsx(D,{children:m});export{I as default};
