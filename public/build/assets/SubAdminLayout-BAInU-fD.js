import{r as n,J as x,j as e,t as b}from"./app-DVKDYkXn.js";import{M as g}from"./menu-CmgxFT07.js";import{S as j}from"./search-CWxSpjiP.js";import{B as y}from"./bell-BPh2_WIZ.js";import{c as m}from"./clsx-B-dksMZM.js";import{a as N}from"./axiosInstance-DbG8c_Wf.js";import{L as w}from"./layout-dashboard-z_EU-noV.js";import{c as v}from"./createLucideIcon-V0M9PHiF.js";import{F as u}from"./file-text-BNaR_w6u.js";import{X as S}from"./x-BXpkOE8a.js";import{L as A}from"./log-out-mnJCr85j.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],h=v("circle-user-round",k),p=n.createContext(),C=()=>n.useContext(p),L=({children:a})=>{const{auth:r}=x().props,t=r==null?void 0:r.subadmin,[i,o]=n.useState([]);n.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const s=(await N.get(`subadmin/${t.id}/permissions`)).data.permissions;Array.isArray(s)?o(s):typeof s=="string"?o(s.split(".").filter(Boolean)):typeof s=="object"&&s!==null&&o(Object.values(s))}catch(c){console.error("Failed to fetch subadmin permissions:",c),o([])}})()},[t==null?void 0:t.id]);const l=n.useMemo(()=>({subadmin:t,permissions:i}),[t,i]);return e.jsx(p.Provider,{value:l,children:a})};function P({toggleSidebar:a}){const[r,t]=n.useState(!1);return e.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-teal-600 text-white z-50 flex items-center justify-between px-4 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:a,className:"md:hidden block p-2 rounded-md hover:bg-teal-500",children:e.jsx(g,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-white text-teal-600 flex items-center justify-center font-bold text-lg",children:"SA"}),e.jsx("h1",{className:"font-bold text-lg",children:"Sub Admin Panel"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>t(!r),className:"p-2 hover:bg-teal-500 rounded-md",children:e.jsx(j,{className:"h-5 w-5"})}),r&&e.jsx("input",{type:"text",placeholder:"Search...",className:"absolute right-0 top-10 w-64 p-2 rounded-md bg-white text-gray-800 shadow-lg"})]}),e.jsx(y,{className:"h-5 w-5 hover:text-gray-200"}),e.jsx("div",{className:"h-8 w-8 bg-teal-500 rounded-full flex items-center justify-center font-semibold",children:"SA"})]})]})}const M=[{name:"Dashboard",href:"/subadmin/dashboard",icon:w,permission:"subADashboard"},{name:"My Profile",href:"/subadmin/profile",icon:h,permission:"subAProfile"},{name:"My Reports",href:"/subadmin/reports",icon:u,permission:"subAReportView"},{name:"Users",href:"/subadmin/createAdmin",icon:h,permission:"subAManagement"},{name:"Settings",href:"/subadmin/settings",icon:u,permission:"subASettingsView"}];function O({isOpen:a,toggleSidebar:r}){const{url:t}=x(),{subadmin:i,permissions:o}=C(),l=t,d=M.filter(s=>!s.permission||o.includes(s.permission)),c=()=>{alert("Logout functionality to be implemented")};return e.jsxs("aside",{className:m("fixed top-0 left-0 z-40 w-64 bg-white dark:bg-gray-900 h-full shadow-lg transition-transform duration-300",a?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4 bg-teal-600 text-white",children:[e.jsx("h2",{className:"font-bold text-lg",children:"ERP SubAdmin"}),e.jsx("button",{onClick:r,className:"md:hidden",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex flex-col mt-4 space-y-1 px-4",children:d.map(s=>{const f=l===s.href;return e.jsxs(b,{href:s.href,className:m("flex items-center gap-3 px-4 py-2 rounded-md font-medium",f?"bg-teal-500 text-white":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800"),children:[e.jsx(s.icon,{className:"w-5 h-5"}),s.name]},s.name)})}),e.jsx("div",{className:"mt-auto px-4 py-4",children:e.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 p-2 rounded-md w-full",children:[e.jsx(A,{className:"w-5 h-5"}),"Logout"]})})]})}function H({children:a}){const[r,t]=n.useState(!1),i=()=>{t(!r)};return e.jsx(L,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(P,{toggleSidebar:i}),e.jsx(O,{isOpen:r,toggleSidebar:i}),e.jsx("main",{className:"pt-16 md:ml-64 transition-all duration-300 p-6",children:a})]})})}export{H as S,C as u};
