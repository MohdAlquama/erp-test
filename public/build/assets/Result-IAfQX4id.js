import{r as l,j as e}from"./app-DVKDYkXn.js";import{u as g,S as f}from"./StudentLayout-B6c9HpS7.js";import{a as o}from"./axiosInstance-DbG8c_Wf.js";import"./log-out-mnJCr85j.js";import"./createLucideIcon-V0M9PHiF.js";import"./layout-dashboard-z_EU-noV.js";import"./user-0Ob6j4Ad.js";import"./calendar-check-CV5d-jRO.js";import"./menu-CmgxFT07.js";function N(){const{student:s,loading:r}=g(),[x,h]=l.useState([]),[t,c]=l.useState(""),[i,u]=l.useState([]),[p,j]=l.useState(!0),[n,m]=l.useState(!1);l.useEffect(()=>{!r&&s&&o.get("/student/admit-card-folders",{params:{admin_id:s.admin_id,year:s.session}}).then(a=>{const d=a.data.data||[];h(d),d.length>0&&c(d[0].folder_name)}).catch(a=>console.error("Error fetching folders:",a)).finally(()=>j(!1))},[r,s]);const b=()=>{!t||!s||(m(!0),o.get(`/student/result/${s.admin_id}/${t}/${s.batch_ids}/${s.enrollment_number}`).then(a=>{u(a.data.data||[])}).catch(a=>console.error("Error fetching results:",a)).finally(()=>m(!1)))};return r||p?e.jsx("div",{className:"p-6 text-center",children:"Loading..."}):e.jsx("div",{className:"min-h-screen bg-gray-100 p-3 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Result Card Details"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6 mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s!=null&&s.profile_image?`/storage/${s.profile_image}`:"/default-avatar.png",alt:(s==null?void 0:s.name)||"Student",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:s.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"enrollment Number"}),e.jsxs("p",{className:"font-medium",children:["ID:",s.enrollment_number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Number"}),e.jsx("p",{className:"font-medium",children:s.contact_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"father name"}),e.jsx("p",{className:"font-medium",children:s.father_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Session"}),e.jsx("p",{className:"font-medium",children:s.session})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Dob"}),e.jsx("p",{className:"font-medium",children:new Date(s.dob).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 gap-4 sm:p-6 shadow-sm",children:[e.jsx("label",{htmlFor:"folder",className:"block mb-2 font-semibold",children:"Choose Result Card"}),e.jsxs("select",{id:"folder",className:"border p-2 rounded w-full max-w-xs",value:t,onChange:a=>c(a.target.value),children:[e.jsx("option",{value:"",children:"-- Select it --"}),x.map(a=>e.jsx("option",{value:a.folder_name,children:a.folder_name},a.id))]}),e.jsxs("button",{onClick:b,className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400",disabled:n||!t,children:[n?"Fetching...":"Load Results","          "]})]}),i.length>0?e.jsx("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"p-3 border",children:"Subject"}),e.jsx("th",{className:"p-3 border",children:"Teacher"}),e.jsx("th",{className:"p-3 border",children:"Exam Venue"}),e.jsx("th",{className:"p-3 border",children:"Exam Date"}),e.jsx("th",{className:"p-3 border",children:"Exam Time"}),e.jsx("th",{className:"p-3 border",children:"Max Marks"}),e.jsx("th",{className:"p-3 border",children:"Scored"}),e.jsx("th",{className:"p-3 border",children:"Status"})]})}),e.jsx("tbody",{children:i.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border",children:a.subject_name}),e.jsx("td",{className:"p-3 border",children:a.teacher_id}),e.jsx("td",{className:"p-3 border",children:a.exam_venue}),e.jsx("td",{className:"p-3 border",children:a.exam_date}),e.jsx("td",{className:"p-3 border",children:a.exam_time}),e.jsx("td",{className:"p-3 border",children:a.max_marks}),e.jsx("td",{className:"p-3 border font-bold",children:a.scored_marks}),e.jsx("td",{className:"p-3 border",children:a.result_status})]},a.result_id))})]})}):e.jsx("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm",children:e.jsx("p",{className:"text-gray-500 text-center",children:"No results found."})})]})})}N.layout=s=>e.jsx(f,{children:s});export{N as default};
