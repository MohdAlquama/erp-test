import{r as c,j as e}from"./app-Da_nhggM.js";import{a as u}from"./axiosInstance-BO4ZrsK3.js";function f({folder_id:a,admin_id:r,batch_id:n,refreshKey:m}){const[x,o]=c.useState([]),[p,h]=c.useState(!0),[l,i]=c.useState("");c.useEffect(()=>{if(!a||!r||!n)return;(async()=>{try{const t=await u.get(`/admin/${r}/results/${a}/${n}`);o(t.data)}catch(t){console.error("Error fetching results:",t)}finally{h(!1)}})()},[a,r,n,m]);const b=async s=>{if(window.confirm("Are you sure you want to delete this result?"))try{await u.delete(`admin/results/${r}/${s.enrollment_number}`),o(t=>t.filter(d=>d.enrollment_number!==s.enrollment_number)),alert("Result deleted successfully!")}catch(t){console.error("Error deleting result:",t),alert("Failed to delete result")}},j=async()=>{try{const s=await u.put("/admin/results/approve",{admin_id:r,batch_id:n,folder_id:a});o(t=>t.map(d=>({...d,status:"approved"}))),alert(s.data.message)}catch(s){console.error("Error approving results:",s),alert("Failed to approve results")}},y=x.filter(s=>s.enrollment_number.toLowerCase().includes(l.toLowerCase())||s.student_name.toLowerCase().includes(l.toLowerCase())||s.subject_name.toLowerCase().includes(l.toLowerCase()));return p?e.jsx("p",{className:"text-center mt-4",children:"Loading..."}):x.length?e.jsxs("div",{className:"overflow-x-auto mt-4",children:[e.jsx("p",{className:"text-center text-lg font-medium mb-2 text-gray-700",children:"Result Data Table – Search, Manage & Delete"}),e.jsxs("div",{className:"flex flex-col items-center mb-4 space-y-3",children:[e.jsxs("div",{className:"relative w-1/2",children:[e.jsx("input",{type:"text",placeholder:"🔍 Search by enrollment, student or subject...",value:l,onChange:s=>i(s.target.value),className:"border px-4 py-2 rounded w-full focus:ring-2 focus:ring-blue-400 outline-none"}),l&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-2 text-gray-500 hover:text-red-500",children:"✕"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Approve All Results"}),e.jsx("button",{onClick:()=>console.log("Button 2 clicked"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Button 2"})]})]}),e.jsxs("table",{className:"min-w-full border border-gray-300 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:"Enrollment"}),e.jsx("th",{className:"border px-4 py-2",children:"Subject"}),e.jsx("th",{className:"border px-4 py-2",children:"Student"}),e.jsx("th",{className:"border px-4 py-2",children:"Max Marks"}),e.jsx("th",{className:"border px-4 py-2",children:"Scored Marks"}),e.jsx("th",{className:"border px-4 py-2",children:"Status"}),e.jsx("th",{className:"border px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-2",children:s.enrollment_number}),e.jsx("td",{className:"border px-4 py-2",children:s.subject_name}),e.jsx("td",{className:"border px-4 py-2",children:s.student_name}),e.jsx("td",{className:"border px-4 py-2",children:s.max_marks}),e.jsx("td",{className:"border px-4 py-2",children:s.scored_marks}),e.jsx("td",{className:"border px-4 py-2 capitalize",children:s.status}),e.jsx("td",{className:"border px-4 py-2 text-center space-x-2",children:e.jsx("button",{onClick:()=>b(s),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded",children:"Delete"})})]},s.enrollment_number))})]})]}):e.jsx("p",{className:"text-center mt-4",children:"No results found"})}export{f as default};
