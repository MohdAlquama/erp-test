import{r as d,j as a}from"./app-Da_nhggM.js";import{a as x}from"./axiosInstance-BO4ZrsK3.js";import{e as j,R as f,C,p as N,a as w,b as A,A as v,f as Y,g as D,h as E,i as P}from"./index-DpGh3bmv.js";C.register(N,w,A,v,Y,D,E,P);function _(){const[o,i]=d.useState([]),[r,b]=d.useState(new Date().getFullYear());d.useEffect(()=>{x.get("/student/get-attendance").then(e=>i(e.data)).catch(e=>console.error(e))},[]);const s=o.filter(e=>new Date(e.date).getFullYear()===r).reduce((e,n)=>{const l=n.subject_name,m=n.status;return e[l]||(e[l]={present:0,absent:0}),e[l][m]+=1,e},{}),t=Object.keys(s),g=t.map(e=>s[e].present),u=t.map(e=>s[e].absent),p={labels:t,datasets:[{label:"Total Attendance (Present + Absent)",data:t.map(e=>s[e].present+s[e].absent),backgroundColor:["rgba(75, 192, 192, 0.7)","rgba(255, 99, 132, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 206, 86, 0.7)","rgba(54, 162, 235, 0.7)"]}]},h={labels:t,datasets:[{label:"Present",data:g,backgroundColor:"rgba(75, 192, 192, 0.3)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2},{label:"Absent",data:u,backgroundColor:"rgba(255, 99, 132, 0.3)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:2}]},c=[...new Set(o.map(e=>new Date(e.date).getFullYear()))];return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex gap-4",children:a.jsx("select",{className:"border p-2 rounded",value:r,onChange:e=>b(Number(e.target.value)),children:c.length>0?c.map(e=>a.jsx("option",{value:e,children:e},e)):a.jsx("option",{children:new Date().getFullYear()})})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsxs("h2",{className:"text-lg font-bold mb-2",children:["Polar Area Chart (",r,")"]}),t.length>0?a.jsx(j,{data:p}):a.jsx("p",{children:"No data"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsxs("h2",{className:"text-lg font-bold mb-2",children:["Radar Chart (",r,")"]}),t.length>0?a.jsx(f,{data:h}):a.jsx("p",{children:"No data"})]})]})]})}export{_ as default};
