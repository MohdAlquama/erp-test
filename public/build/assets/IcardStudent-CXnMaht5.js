import{r as l,j as t}from"./app-Da_nhggM.js";import{u as b,S as j}from"./StudentLayout-nMb2uY8-.js";import N from"./html2canvas.esm-CBrSDip1.js";import{E as y}from"./jspdf.es.min-Bvg96Kmx.js";import{a as g}from"./axiosInstance-BO4ZrsK3.js";import"./log-out-C0sdDckr.js";import"./createLucideIcon-Cl5mBFKr.js";import"./layout-dashboard-DeJPl4RO.js";import"./user-C3Ls9d9N.js";import"./calendar-check-By_vXnKs.js";import"./menu-By4tiiDw.js";function v(){const{student:e,loading:h}=b(),[o,x]=l.useState({id:"",name:"",logo_url:"",location:""}),[i,p]=l.useState({id:"",name:"",grade:"",section:""}),n=l.useRef();l.useEffect(()=>{e!=null&&e.admin_id&&(e!=null&&e.batch_ids)&&g.get(`/student/${e.admin_id}/batches/${e.batch_ids}`).then(a=>{var s,r;((r=(s=a.data)==null?void 0:s.batches)==null?void 0:r.length)>0&&(p(a.data.batches[0]),console.log("Batch Data:",a.data.batches[0]))}).catch(a=>console.error("Error fetching batch data:",a))},[e]),l.useEffect(()=>{e!=null&&e.admin_id&&g.get(`/student/${e.admin_id}/colleges`).then(a=>{var s;((s=a.data)==null?void 0:s.length)>0&&(x(a.data[0]),console.log("College Data:",a.data[0]))}).catch(a=>console.error("Error fetching college data:",a))},[e]);const f=async()=>{if(!n.current||!e)return;const a=n.current,r=(await N(a,{scale:2})).toDataURL("image/png"),c=new y("p","mm","a4"),d=c.getImageProperties(r),m=c.internal.pageSize.getWidth(),u=d.height*m/d.width;c.addImage(r,"PNG",10,10,m-20,u),c.save(`${e.name||"student"}_IDCard.pdf`)};return h?t.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:t.jsx("p",{className:"text-gray-600 text-lg",children:"Loading Student ID..."})}):e?t.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gray-100 p-6 gap-6",children:[t.jsxs("div",{ref:n,className:"w-96 bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-blue-700 text-white px-4 py-3",children:[t.jsx("img",{src:o.logo_url||"https://via.placeholder.com/80",alt:"College Logo",className:"w-12 h-12 object-cover rounded-full border-2 border-white"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold",children:o.name||"College Name"}),t.jsx("p",{className:"text-xs text-gray-200",children:o.location||"College Location"})]})]}),t.jsxs("div",{className:"p-5 flex items-center gap-4",children:[t.jsx("img",{src:e!=null&&e.profile_image?`/storage/${e.profile_image}`:"/default-avatar.png",alt:`Profile picture of ${(e==null?void 0:e.name)||"Student"}`,className:"w-24 h-24 rounded-lg object-cover border-2 border-blue-700 shadow-md"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.name}),t.jsxs("p",{className:"text-gray-600 text-sm",children:["Enrollment No: ",e.enrollment_number]}),t.jsxs("p",{className:"text-gray-600 text-sm",children:["Batch: ",i.name||"N/A"]}),t.jsxs("p",{className:"text-gray-600 text-sm",children:["Section: ",i.section||"N/A"]}),t.jsxs("p",{className:"text-gray-600 text-sm",children:["Grade: ",i.grade||"N/A"]})]})]}),t.jsxs("div",{className:"bg-gray-50 border-t px-4 py-2 text-center text-xs text-gray-500",children:["Â© ",new Date().getFullYear()," ",o.name||"College"," | All Rights Reserved"]})]}),t.jsx("button",{onClick:f,disabled:!e,className:"px-5 py-2 bg-blue-700 text-white rounded-lg shadow-md hover:bg-blue-800 transition disabled:opacity-50",children:"Download ID Card (PDF)"})]}):t.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:t.jsx("p",{className:"text-red-500 text-lg",children:"No student data available."})})}v.layout=e=>t.jsx(j,{children:e});export{v as default};
