import{r as t,J as m,j as x}from"./app-Da_nhggM.js";import{a as h}from"./axiosInstance-BO4ZrsK3.js";const d=t.createContext(null),v=()=>{const o=t.useContext(d);if(!o)throw new Error("useBaseContext must be used within a BaseProvider");return o},C=({children:o})=>{const{props:n}=m(),e=(n==null?void 0:n.admin)||null,[s,u]=t.useState(e),[f,r]=t.useState([]),[i,a]=t.useState(!0);t.useEffect(()=>{e!=null&&e.id&&(e==null?void 0:e.id)!==(s==null?void 0:s.id)&&u(e)},[e]),t.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){r([]),a(!1);return}a(!0);try{const{data:c}=await h.get(`/admin/${s.id}/permissions`);r(c.permissions||[])}catch(c){console.error("Error fetching permissions:",c),r([])}finally{a(!1)}})()},[s==null?void 0:s.id]);const l=t.useMemo(()=>({admin:s,setAdmin:u,permissions:f,setPermissions:r,loading:i}),[s,f,i]);return i?x.jsx("div",{children:"Loading admin data..."}):x.jsx(d.Provider,{value:l,children:o})};export{C as B,v as u};
