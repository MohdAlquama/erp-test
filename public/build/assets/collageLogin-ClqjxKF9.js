import{r as n,j as e,S as x}from"./app-DVKDYkXn.js";import{g as f,a as w}from"./axiosInstance-DbG8c_Wf.js";import{V as r}from"./index-Cz5qM-jY.js";function j(){const[s,d]=n.useState({email:"",password:""}),[o,m]=n.useState({}),[c,u]=n.useState(!1),g=async a=>{a.preventDefault(),u(!0),m({}),await f(),w.post("/admin",s).then(t=>{var p;const l=[(p=t.data.detail.role)==null?void 0:p.toLowerCase()];r.success("Login successful! Redirecting..."),l.includes("collegeadmin")?x.visit("/admin/t"):r.error("No valid role assigned")}).catch(t=>{var i,l;((i=t.response)==null?void 0:i.status)===422?(m(t.response.data.errors||{}),r.error("Validation failed. Check inputs.")):((l=t.response)==null?void 0:l.status)===401?r.error("Invalid email or password"):r.error("Something went wrong. Try again.")}).finally(()=>u(!1))};return e.jsxs("form",{onSubmit:g,className:"p-4 max-w-md mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:" Login"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>d({...s,email:a.target.value}),placeholder:"Email",className:"w-full border p-2 mb-2"}),o.email&&e.jsx("div",{className:"text-red-500 text-sm",children:o.email}),e.jsx("input",{type:"password",value:s.password,onChange:a=>d({...s,password:a.target.value}),placeholder:"Password",className:"w-full border p-2 mb-2"}),o.password&&e.jsx("div",{className:"text-red-500 text-sm",children:o.password}),e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded w-full",children:c?"Logging in...":"Login"})]})}export{j as default};
