import{r as m,j as e}from"./app-DVKDYkXn.js";import{u as S}from"./adminContext-PWhikkwe.js";import{A as k}from"./AdminLayout-xaFDPYzW.js";import{a as h}from"./axiosInstance-DbG8c_Wf.js";import D from"./AdmitCardDataGet-B7VD9ioE.js";import E from"./Result-BWUFpLxw.js";import R from"./ResultGetData-D2b3ZM9X.js";import"./index-Cz5qM-jY.js";import"./menu-CmgxFT07.js";import"./createLucideIcon-V0M9PHiF.js";import"./search-CWxSpjiP.js";import"./bell-BPh2_WIZ.js";import"./user-0Ob6j4Ad.js";import"./x-BXpkOE8a.js";import"./house-CAgWt0V0.js";import"./users-DYTZw1Iw.js";import"./graduation-cap-DP4x_y6M.js";import"./file-text-BNaR_w6u.js";import"./settings-DfQ06Dqm.js";import"./log-out-mnJCr85j.js";function B({admit_card_folders_data:n,folderId:l,batchId:d}){const{admin:r}=S(),[b,j]=m.useState([]),[p,o]=m.useState([]),[y,_]=m.useState(""),[N,v]=m.useState(""),[i,u]=m.useState(0);m.useEffect(()=>{const a=n.map(t=>({...t,exam_venue:"",exam_date:"",exam_time:""}));o(a),(async()=>{try{const t=await h.get(`/admin/${r.id}/class-rooms`);j(t.data.rooms)}catch(t){console.error(t)}})()},[n,r.id]);const x=(a,s,t)=>{const c=[...p];c[a][s]=t,o(c)},f=a=>{_(a),o(s=>s.map(t=>({...t,exam_date:a})))},g=a=>{v(a),o(s=>s.map(t=>({...t,exam_time:a})))},C=async a=>{try{const s={admin_id:r.id,folder_id:l,batch_id:d,enrollment_number:a.enrollment_number,subject_name:a.subject_name,batch_name:a.batch_name,teacher_name:a.teacher_name,student_name:a.student_name,exam_venue:a.exam_venue,exam_date:a.exam_date,exam_time:a.exam_time},t=await h.post(`/admin/${r.id}/admit-card/submit`,s);console.log("Saved successfully:",t.data),alert("Row saved successfully!"),u(c=>c+1)}catch(s){console.error("Error saving row:",s),alert("Failed to save row!")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Bulk Exam Date"}),e.jsx("input",{type:"date",value:y,onChange:a=>f(a.target.value),className:"border px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Bulk Exam Time"}),e.jsx("input",{type:"time",value:N,onChange:a=>g(a.target.value),className:"border px-2 py-1"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:"Enrollment Number"}),e.jsx("th",{className:"border px-4 py-2",children:"Subject"}),e.jsx("th",{className:"border px-4 py-2",children:"Batch"}),e.jsx("th",{className:"border px-4 py-2",children:"Teacher"}),e.jsx("th",{className:"border px-4 py-2",children:"Student"}),e.jsx("th",{className:"border px-4 py-2",children:"Exam Venue"}),e.jsx("th",{className:"border px-4 py-2",children:"Exam Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Exam Time"}),e.jsx("th",{className:"border px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:p.map((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-2",children:a.enrollment_number}),e.jsx("td",{className:"border px-4 py-2",children:a.subject_name}),e.jsx("td",{className:"border px-4 py-2",children:a.batch_name}),e.jsx("td",{className:"border px-4 py-2",children:a.teacher_name}),e.jsx("td",{className:"border px-4 py-2",children:a.student_name}),e.jsx("td",{className:"border px-4 py-2",children:e.jsxs("select",{value:a.exam_venue,onChange:t=>x(s,"exam_venue",t.target.value),className:"border px-2 py-1 w-full",children:[e.jsx("option",{value:"",children:"Select Venue"}),b.map(t=>e.jsx("option",{value:t.room_name,children:t.room_name},t.id))]})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"date",value:a.exam_date,onChange:t=>x(s,"exam_date",t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("input",{type:"time",value:a.exam_time,onChange:t=>x(s,"exam_time",t.target.value),className:"border px-2 py-1 w-full"})}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{onClick:()=>C(a),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Submit"})})]},s))})]})}),e.jsx(D,{folder_id:l,admin_id:r.id,batch_id:d,refreshKey:i}),e.jsx(E,{folder_id:l,admin_id:r.id,batch_id:d,refreshKey:i,onResultSubmitted:()=>u(a=>a+1)}),e.jsx(R,{folder_id:l,admin_id:r.id,batch_id:d,refreshKey:i})]})}B.layout=n=>e.jsx(k,{children:n});export{B as default};
