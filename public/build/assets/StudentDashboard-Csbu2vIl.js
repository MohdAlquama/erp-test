import{J as g,r as n,j as e}from"./app-Da_nhggM.js";import{S as p}from"./StudentLayout-nMb2uY8-.js";import{a as f}from"./axiosInstance-BO4ZrsK3.js";import{c as m}from"./createLucideIcon-Cl5mBFKr.js";import{U as N}from"./user-C3Ls9d9N.js";import"./log-out-C0sdDckr.js";import"./layout-dashboard-DeJPl4RO.js";import"./calendar-check-By_vXnKs.js";import"./menu-By4tiiDw.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],b=m("circle-check-big",u);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],v=m("ellipsis",y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],D=m("funnel",w),S=()=>{const{props:d}=g(),{student:s}=d,[t,o]=n.useState([]),[A,x]=n.useState(!1),[_,h]=n.useState(null);return console.log(s),n.useEffect(()=>{x(!0),f.get(`/student/get-attendance/${s.enrollment_number}/${s.admin_id}`).then(a=>{const c=a.data,r={};c.forEach(i=>{const l=new Date(i.date).toLocaleString("en-US",{month:"long",year:"numeric"});r[l]||(r[l]={total:0,present:0,absent:0}),r[l].total+=1,i.status==="present"&&(r[l].present+=1),i.status==="absent"&&(r[l].absent+=1)});const j=Object.entries(r).map(([i,l])=>({month:i,total:l.total,present:l.present,absent:l.absent,rate:(l.present/l.total*100).toFixed(2)}));o(j)}).catch(a=>{console.error("Error fetching attendance data:",a),h("Failed to load attendance data. Please try again later.")}).finally(()=>{x(!1)})},[]),e.jsx("div",{className:"min-h-screen bg-gray-100 p-3 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Student Details"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6 mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s!=null&&s.profile_image?`/storage/${s.profile_image}`:"/default-avatar.png",alt:`Profile picture of ${(s==null?void 0:s.name)||"Student"}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:s.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Enrollment Number"}),e.jsxs("p",{className:"font-medium",children:["ID: ",s.enrollment_number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Number"}),e.jsx("p",{className:"font-medium",children:s.contact_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Father's Name"}),e.jsx("p",{className:"font-medium",children:s.father_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Session"}),e.jsx("p",{className:"font-medium",children:s.session})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Date of Birth"}),e.jsx("p",{className:"font-medium",children:new Date(s.dob).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Class Days"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Class days for Monthly"}),e.jsxs("div",{className:"text-4xl font-bold text-gray-800",children:[t.length>0?t[0].total:"N/A"," Days"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Attendance Rate"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This Year"}),e.jsxs("div",{className:"text-4xl font-bold text-gray-800 mb-6",children:[t.length>0?(t.reduce((a,c)=>a+parseFloat(c.rate),0)/t.length).toFixed(2):"N/A","%"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Monthly Rate"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((a,c)=>e.jsxs("div",{className:"bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-medium",children:[a.month," ",a.rate,"%"]},c))})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["ðŸ’¡ ",s.name,"'s monthly attendance rate highlights their consistent commitment to attending classes."]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Summary - ",s.name]}),e.jsx("button",{"aria-label":"More options",children:e.jsx(v,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-500 rounded-2xl p-4 text-white text-center",children:[e.jsx("div",{className:"text-2xl font-bold mb-2",children:t.length>0?t[0].present:"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx(b,{size:16}),"Attendance"]})]}),e.jsxs("div",{className:"bg-red-500 rounded-2xl p-4 text-white text-center",children:[e.jsx("div",{className:"text-2xl font-bold mb-2",children:t.length>0?t[0].absent:"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx(N,{size:16}),"Absent"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Top Attendance Students"}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg text-sm hover:bg-gray-50 transition-colors","aria-label":"Filter students",children:[e.jsx(D,{size:16}),"Filter"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-500",children:[e.jsx("th",{className:"pb-4",children:"Number"}),e.jsx("th",{className:"pb-4",children:"Name"}),e.jsx("th",{className:"pb-4",children:"ID"}),e.jsx("th",{className:"pb-4",children:"Progress"})]})}),e.jsxs("tbody",{className:"space-y-4",children:[e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-sm font-medium",children:"01"})})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("img",{src:"/api/placeholder/32/32",alt:"Duxton Farmer",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium",children:"Duxton Farmer"})]})}),e.jsx("td",{className:"py-4 text-gray-600",children:"2020-4535"}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"91%"}})}),e.jsx("span",{className:"text-sm font-medium",children:"91%"})]})})]}),e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 text-sm font-medium",children:"02"})})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("img",{src:"/api/placeholder/32/32",alt:"Todd Dye",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium",children:"Todd Dye"})]})}),e.jsx("td",{className:"py-4 text-gray-600",children:"2017-4718"}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"91%"}})}),e.jsx("span",{className:"text-sm font-medium",children:"91%"})]})})]}),e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 text-sm font-medium",children:"03"})})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("img",{src:"/api/placeholder/32/32",alt:"Julia Willis",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium",children:"Julia Willis"})]})}),e.jsx("td",{className:"py-4 text-gray-600",children:"2017-4723"}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"90%"}})}),e.jsx("span",{className:"text-sm font-medium",children:"90%"})]})})]})]})]})})]})]})})};S.layout=d=>e.jsx(p,{children:d});export{S as default};
