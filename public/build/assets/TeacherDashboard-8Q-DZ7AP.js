import{r as c,j as e}from"./app-Da_nhggM.js";import{u as Ye,T as Ge}from"./TeacherLayout-DqvGaxB6.js";import{a as Ve}from"./axiosInstance-BO4ZrsK3.js";import{c as V}from"./createLucideIcon-Cl5mBFKr.js";import{U as me}from"./users-SPycqOBZ.js";import{m as we,l as oe,f as ke,n as Ue,o as Xe,p as Pe,q as ce,t as Y,v as de,x as ue,y as Se,z as Ee,A as qe,D as he,E as He,F as Ie,G as pe,H as Je,r as De,e as Ce,I as Qe,S as Ze,J as et,K as tt,M as at,N as Oe,O as rt,Q as nt,U as st,V as it,W as lt,Z as _e,_ as ot,$ as fe,a0 as ge,i as G,a1 as ct,a2 as dt,a3 as $,a4 as ut,a5 as re,a6 as xt,a7 as ee,a8 as mt,a9 as ht,R as W,B as Q,X as U,Y as X,T as F,L as Z,b as M,P as pt,a as ft,C as gt}from"./PieChart-VRHT1DMZ.js";import{C as q}from"./CartesianGrid-BxZ-ff9C.js";import{B as vt}from"./user-C3Ls9d9N.js";import{c as xe}from"./clsx-B-dksMZM.js";import"./index-CgiR4QPD.js";import"./x-Buk7JkW1.js";import"./house-BqJmp5lC.js";import"./settings-2yKiBYT4.js";import"./log-out-C0sdDckr.js";import"./menu-By4tiiDw.js";import"./bell-Dmhy7b3m.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ve=V("award",yt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ye=V("calendar",bt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nt=V("clock",jt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ne=V("trending-up",At);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kt=V("user-check",wt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],St=V("user-x",Pt);function se(){return se=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},se.apply(null,arguments)}var Be=a=>{var{cx:t,cy:r,r:n,className:s}=a,i=xe("recharts-dot",s);return t===+t&&r===+r&&n===+n?c.createElement("circle",se({},oe(a),we(a),{className:i,cx:t,cy:r,r:n})):null};function be(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),r.push.apply(r,n)}return r}function je(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(n){Et(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Et(a,t,r){return(t=It(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function It(a){var t=Dt(a,"string");return typeof t=="symbol"?t:t+""}function Dt(a,t){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var n=r.call(a,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Ct=a=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=a;if(s===!1||t.x==null||t.y==null)return null;var u=je(je({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},ce(s,!1)),we(s)),o;return c.isValidElement(s)?o=c.cloneElement(s,u):typeof s=="function"?o=s(u):o=c.createElement(Be,u),c.createElement(Y,{className:"recharts-active-dot"},o)};function Ne(a){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=a,i=ke(Ue),u=Xe();if(t==null||u==null)return null;var o=t.find(d=>u.includes(d.payload));return Pe(o)?null:Ct({point:o,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var Te=(a,t,r,n)=>Se(a,"xAxis",t,n),Le=(a,t,r,n)=>Ee(a,"xAxis",t,n),Re=(a,t,r,n)=>Se(a,"yAxis",r,n),Ke=(a,t,r,n)=>Ee(a,"yAxis",r,n),Ot=de([ue,Te,Re,Le,Ke],(a,t,r,n,s)=>Ie(a,"xAxis")?pe(t,n,!1):pe(r,s,!1)),_t=(a,t,r,n,s)=>s,Me=de([Je,_t],(a,t)=>a.filter(r=>r.type==="area").find(r=>r.id===t)),Bt=(a,t,r,n,s)=>{var i,u=Me(a,t,r,n,s);if(u!=null){var o=ue(a),d=Ie(o,"xAxis"),m;if(d?m=he(a,"yAxis",r,n):m=he(a,"xAxis",t,n),m!=null){var{stackId:y}=u,A=He(u);if(!(y==null||A==null)){var v=(i=m[y])===null||i===void 0?void 0:i.stackedData;return v==null?void 0:v.find(f=>f.key===A)}}}},Tt=de([ue,Te,Re,Le,Ke,Bt,qe,Ot,Me],(a,t,r,n,s,i,u,o,d)=>{var{chartData:m,dataStartIndex:y,dataEndIndex:A}=u;if(!(d==null||a!=="horizontal"&&a!=="vertical"||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{data:v}=d,f;if(v&&v.length>0?f=v:f=m==null?void 0:m.slice(y,A+1),f!=null){var j=void 0;return ta({layout:a,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataStartIndex:y,areaSettings:d,stackedData:i,displayedData:f,chartBaseValue:j,bandSize:o})}}}),Lt=["id"],Rt=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ze(a,t){if(a==null)return{};var r,n,s=Kt(a,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function Kt(a,t){if(a==null)return{};var r={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(t.indexOf(n)!==-1)continue;r[n]=a[n]}return r}function Ae(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),r.push.apply(r,n)}return r}function z(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(r),!0).forEach(function(n){Mt(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Mt(a,t,r){return(t=zt(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function zt(a){var t=$t(a,"string");return typeof t=="symbol"?t:t+""}function $t(a,t){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var n=r.call(a,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function R(){return R=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},R.apply(null,arguments)}function te(a,t){return a&&a!=="none"?a:t}var Wt=a=>{var{dataKey:t,name:r,stroke:n,fill:s,legendType:i,hide:u}=a;return[{inactive:u,dataKey:t,type:i,color:te(n,s),value:Oe(r,t),payload:a}]};function Ft(a){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:u,hide:o,unit:d}=a;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Oe(u,t),hide:o,type:a.tooltipType,color:te(n,i),unit:d}}}var Yt=(a,t)=>{var r;if(c.isValidElement(a))r=c.cloneElement(a,t);else if(typeof a=="function")r=a(t);else{var n=xe("recharts-area-dot",typeof a!="boolean"?a.className:"");r=c.createElement(Be,R({},t,{className:n}))}return r};function Gt(a,t){return a==null?!1:t?!0:a.length===1}function Vt(a){var{clipPathId:t,points:r,props:n}=a,{needClip:s,dot:i,dataKey:u}=n;if(!Gt(r,i))return null;var o=_e(i),d=oe(n),m=ce(i,!0),y=r.map((v,f)=>{var j=z(z(z({key:"dot-".concat(f),r:3},d),m),{},{index:f,cx:v.x,cy:v.y,dataKey:u,value:v.value,payload:v.payload,points:r});return Yt(i,j)}),A={clipPath:s?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return c.createElement(Y,R({className:"recharts-area-dots"},A),y)}function ie(a){var{points:t,baseLine:r,needClip:n,clipPathId:s,props:i,showLabels:u}=a,{layout:o,type:d,stroke:m,connectNulls:y,isRange:A}=i,{id:v}=i,f=ze(i,Lt),j=oe(f);return c.createElement(c.Fragment,null,(t==null?void 0:t.length)>1&&c.createElement(Y,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},c.createElement(re,R({},j,{id:v,points:t,connectNulls:y,type:d,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),m!=="none"&&c.createElement(re,R({},j,{className:"recharts-area-curve",layout:o,type:d,connectNulls:y,fill:"none",points:t})),m!=="none"&&A&&c.createElement(re,R({},j,{className:"recharts-area-curve",layout:o,type:d,connectNulls:y,fill:"none",points:r}))),c.createElement(Vt,{points:t,props:f,clipPathId:s}),u&&xt.renderCallByParent(f,t))}function Ut(a){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=a,i=n[0].y,u=n[n.length-1].y;if(!ee(i)||!ee(u))return null;var o=t*Math.abs(i-u),d=Math.max(...n.map(m=>m.x||0));return G(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(m=>m.x||0),d)),G(d)?c.createElement("rect",{x:0,y:i<u?i:i-o,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(o)}):null}function Xt(a){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=a,i=n[0].x,u=n[n.length-1].x;if(!ee(i)||!ee(u))return null;var o=t*Math.abs(i-u),d=Math.max(...n.map(m=>m.y||0));return G(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(m=>m.y||0),d)),G(d)?c.createElement("rect",{x:i<u?i:i-o,y:0,width:o,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function qt(a){var{alpha:t,layout:r,points:n,baseLine:s,strokeWidth:i}=a;return r==="vertical"?c.createElement(Ut,{alpha:t,points:n,baseLine:s,strokeWidth:i}):c.createElement(Xt,{alpha:t,points:n,baseLine:s,strokeWidth:i})}function Ht(a){var{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=a,{points:u,baseLine:o,isAnimationActive:d,animationBegin:m,animationDuration:y,animationEasing:A,onAnimationStart:v,onAnimationEnd:f}=n,j=ct(n,"recharts-area-"),[I,k]=c.useState(!0),O=c.useCallback(()=>{typeof f=="function"&&f(),k(!1)},[f]),C=c.useCallback(()=>{typeof v=="function"&&v(),k(!0)},[v]),P=s.current,h=i.current;return c.createElement(dt,{begin:m,duration:y,isActive:d,easing:A,onAnimationEnd:O,onAnimationStart:C,key:j},b=>{if(P){var w=P.length/u.length,B=b===1?u:u.map((S,K)=>{var T=Math.floor(K*w);if(P[T]){var L=P[T];return z(z({},S),{},{x:$(L.x,S.x,b),y:$(L.y,S.y,b)})}return S}),_;return G(o)?_=$(h,o,b):Pe(o)||ut(o)?_=$(h,0,b):_=o.map((S,K)=>{var T=Math.floor(K*w);if(Array.isArray(h)&&h[T]){var L=h[T];return z(z({},S),{},{x:$(L.x,S.x,b),y:$(L.y,S.y,b)})}return S}),b>0&&(s.current=B,i.current=_),c.createElement(ie,{points:B,baseLine:_,needClip:t,clipPathId:r,props:n,showLabels:!I})}return b>0&&(s.current=u,i.current=o),c.createElement(Y,null,c.createElement("defs",null,c.createElement("clipPath",{id:"animationClipPath-".concat(r)},c.createElement(qt,{alpha:b,points:u,baseLine:o,layout:n.layout,strokeWidth:n.strokeWidth}))),c.createElement(Y,{clipPath:"url(#animationClipPath-".concat(r,")")},c.createElement(ie,{points:u,baseLine:o,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function Jt(a){var{needClip:t,clipPathId:r,props:n}=a,{points:s,baseLine:i,isAnimationActive:u}=n,o=c.useRef(null),d=c.useRef(),m=o.current,y=d.current;return u&&s&&s.length&&(m!==s||y!==i)?c.createElement(Ht,{needClip:t,clipPathId:r,props:n,previousPointsRef:o,previousBaselineRef:d}):c.createElement(ie,{points:s,baseLine:i,needClip:t,clipPathId:r,props:n,showLabels:!0})}class Qt extends c.PureComponent{render(){var t,{hide:r,dot:n,points:s,className:i,top:u,left:o,needClip:d,xAxisId:m,yAxisId:y,width:A,height:v,id:f,baseLine:j}=this.props;if(r)return null;var I=xe("recharts-area",i),k=f,{r:O=3,strokeWidth:C=2}=(t=ce(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},P=_e(n),h=O*2+C;return c.createElement(c.Fragment,null,c.createElement(Y,{className:I},d&&c.createElement("defs",null,c.createElement(ot,{clipPathId:k,xAxisId:m,yAxisId:y}),!P&&c.createElement("clipPath",{id:"clipPath-dots-".concat(k)},c.createElement("rect",{x:o-h/2,y:u-h/2,width:A+h,height:v+h}))),c.createElement(Jt,{needClip:d,clipPathId:k,props:this.props})),c.createElement(Ne,{points:s,mainColor:te(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(j)&&c.createElement(Ne,{points:j,mainColor:te(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var $e={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!lt.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Zt(a){var t,r=De(a,$e),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:u,connectNulls:o,dot:d,fill:m,fillOpacity:y,hide:A,isAnimationActive:v,legendType:f,stroke:j,xAxisId:I,yAxisId:k}=r,O=ze(r,Rt),C=rt(),P=nt(),{needClip:h}=st(I,k),b=Ce(),{points:w,isRange:B,baseLine:_}=(t=ke(H=>Tt(H,I,k,b,a.id)))!==null&&t!==void 0?t:{},S=it();if(C!=="horizontal"&&C!=="vertical"||S==null||P!=="AreaChart"&&P!=="ComposedChart")return null;var{height:K,width:T,x:L,y:ae}=S;return!w||!w.length?null:c.createElement(Qt,R({},O,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:u,baseLine:_,connectNulls:o,dot:d,fill:m,fillOpacity:y,height:K,hide:A,layout:C,isAnimationActive:v,isRange:B,legendType:f,needClip:h,points:w,stroke:j,width:T,left:L,top:ae,xAxisId:I,yAxisId:k}))}var ea=(a,t,r,n,s)=>{var i=r??t;if(G(i))return i;var u=a==="horizontal"?s:n,o=u.scale.domain();if(u.type==="number"){var d=Math.max(o[0],o[1]),m=Math.min(o[0],o[1]);return i==="dataMin"?m:i==="dataMax"||d<0?d:Math.max(Math.min(o[0],o[1]),0)}return i==="dataMin"?o[0]:i==="dataMax"?o[1]:o[0]};function ta(a){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:u,xAxis:o,yAxis:d,displayedData:m,dataStartIndex:y,xAxisTicks:A,yAxisTicks:v,bandSize:f}=a,j=s&&s.length,I=ea(i,u,r,o,d),k=i==="horizontal",O=!1,C=m.map((h,b)=>{var w;j?w=s[y+b]:(w=fe(h,n),Array.isArray(w)?O=!0:w=[I,w]);var B=w[1]==null||j&&!t&&fe(h,n)==null;return k?{x:ge({axis:o,ticks:A,bandSize:f,entry:h,index:b}),y:B?null:d.scale(w[1]),value:w,payload:h}:{x:B?null:o.scale(w[1]),y:ge({axis:d,ticks:v,bandSize:f,entry:h,index:b}),value:w,payload:h}}),P;return j||O?P=C.map(h=>{var b=Array.isArray(h.value)?h.value[0]:null;return k?{x:h.x,y:b!=null&&h.y!=null?d.scale(b):null,payload:h.payload}:{x:b!=null?o.scale(b):null,y:h.y,payload:h.payload}}):P=k?d.scale(I):o.scale(I),{points:C,baseLine:P,isRange:O}}function le(a){var t=De(a,$e),r=Ce();return c.createElement(Qe,{id:t.id,type:"area"},n=>c.createElement(c.Fragment,null,c.createElement(Ze,{legendPayload:Wt(t)}),c.createElement(et,{fn:Ft,args:t}),c.createElement(tt,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:at(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),c.createElement(Zt,R({},t,{id:n}))))}le.displayName="Area";var aa=["axis"],ra=c.forwardRef((a,t)=>c.createElement(mt,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aa,tooltipPayloadSearcher:ht,categoricalChartProps:a,ref:t}));function na(){const{teacherData:a}=Ye(),[t,r]=c.useState([]),[n,s]=c.useState([]),[i,u]=c.useState(!0);c.useEffect(()=>{if(!(a!=null&&a.id)||!(a!=null&&a.admin_id)){u(!1);return}(async()=>{try{const x=await Ve.get(`/teacher/attendances/${a.admin_id}/${a.id}`);s(x.data.data);const p=[],g=new Map;x.data.data.forEach(N=>{const D=`${N.batch_name}-${N.grade}-${N.section}`;g.has(D)||g.set(D,{name:`${N.batch_name} - ${N.grade}${N.section}`,batch_name:N.batch_name,grade:N.grade,section:N.section})}),r(Array.from(g.values()))}catch(x){console.error("Error fetching attendance:",x)}finally{u(!1)}})()},[a]);const o=()=>{const l=new Date,x=5.5*60*60*1e3;return new Date(l.getTime()+x).toISOString().split("T")[0]},d=(l,x)=>n.filter(p=>{const g=new Date(p.date);return g>=l&&g<=x}),m=l=>{const x=l.filter(g=>g.status==="present").length,p=l.filter(g=>g.status==="absent").length;return{present:x,absent:p}},y=o();console.log("Today’s date (IST):",y),console.log("Attendance data:",n);const A=n.filter(l=>l.date===y);console.log("Today’s attendance:",A);const v=m(A),f=new Date,j=new Date(f);j.setDate(f.getDate()-6);const I=d(j,f),k=[];for(let l=0;l<7;l++){const x=new Date(j);x.setDate(j.getDate()+l);const p=x.toISOString().split("T")[0],g=I.filter(Fe=>Fe.date===p),N=m(g),D=x.toLocaleDateString(void 0,{month:"short",day:"numeric"}),E=N.present+N.absent,We=E>0?(N.present/E*100).toFixed(1):0;k.push({date:D,present:N.present,absent:N.absent,total:E,rate:parseFloat(We)})}const O=f.getMonth(),C=f.getFullYear(),P=n.filter(l=>{const x=new Date(l.date);return x.getFullYear()===C&&x.getMonth()===O}),h=m(P),b=t.map(l=>{const x=P.filter(E=>E.batch_name===l.batch_name&&E.grade===l.grade&&E.section===l.section),p=m(x),g=p.present+p.absent,N=g>0?(p.present/g*100).toFixed(1):0,D=new Set(x.map(E=>E.student_enrollment_number)).size;return{batch:l.name,present:p.present,absent:p.absent,total:g,rate:parseFloat(N),students:D}}),w=[{name:"Present",value:v.present,color:"#10B981"},{name:"Absent",value:v.absent,color:"#EF4444"}],B=new Set(n.map(l=>l.student_enrollment_number)).size,_=h.present,S=h.absent,K=_+S>0?(_/(_+S)*100).toFixed(1):0,T=t.map(l=>{const x=A.filter(g=>g.batch_name===l.batch_name&&g.grade===l.grade&&g.section===l.section),p=m(x);return{batch:l.name,present:p.present,absent:p.absent,total:p.present+p.absent}}),L=t.map(l=>{const x=I.filter(D=>D.batch_name===l.batch_name&&D.grade===l.grade&&D.section===l.section),p=m(x),g=p.present+p.absent,N=g>0?(p.present/g*100).toFixed(1):0;return{batch:l.name,present:p.present,absent:p.absent,total:g,rate:parseFloat(N)}}),ae=n.filter(l=>new Date(l.date).getFullYear()===C),H=t.map(l=>{const x=ae.filter(E=>E.batch_name===l.batch_name&&E.grade===l.grade&&E.section===l.section),p=m(x),g=p.present+p.absent,N=g>0?(p.present/g*100).toFixed(1):0,D=new Set(x.map(E=>E.student_enrollment_number)).size;return{batch:l.name,present:p.present,absent:p.absent,total:g,rate:parseFloat(N),students:D}}),J=({title:l,value:x,icon:p,color:g,bgColor:N,textColor:D})=>e.jsx("div",{className:`${N} rounded-2xl p-6 text-white shadow-lg transform hover:scale-105 transition-all duration-300`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm font-medium",children:l}),e.jsx("p",{className:`text-3xl font-bold ${D||"text-white"} mt-2`,children:x})]}),e.jsx("div",{className:`${g} p-3 rounded-xl bg-white/20`,children:e.jsx(p,{size:24,className:"text-white"})})]})});return i?e.jsx("main",{className:"flex-1 p-4 lg:p-6 bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("p",{children:"Loading..."})})}):e.jsx("main",{className:"flex-1 p-4 lg:p-6 bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Teacher Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(Nt,{size:18}),e.jsx("span",{className:"text-sm",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Welcome back! Here's your attendance overview and class insights."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(J,{title:"Total Students",value:B,icon:me,color:"bg-blue-500",bgColor:"bg-gradient-to-br from-blue-500 to-blue-600"}),e.jsx(J,{title:"Today's Present",value:v.present,icon:kt,color:"bg-green-500",bgColor:"bg-gradient-to-br from-green-500 to-green-600"}),e.jsx(J,{title:"Today's Absent",value:v.absent,icon:St,color:"bg-red-500",bgColor:"bg-gradient-to-br from-red-500 to-red-600"}),e.jsx(J,{title:"Monthly Rate",value:`${K}%`,icon:ne,color:"bg-purple-500",bgColor:"bg-gradient-to-br from-purple-500 to-purple-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(ye,{className:"mr-2 text-blue-500",size:24}),"Today's Batch Performance"]}),e.jsx(W,{width:"100%",height:300,children:e.jsxs(Q,{data:T,margin:{top:20,right:30,left:0,bottom:40},children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(U,{dataKey:"batch",tick:{fontSize:10},stroke:"#6B7280",angle:-45,textAnchor:"end",height:80}),e.jsx(X,{stroke:"#6B7280"}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"}}),e.jsx(Z,{}),e.jsx(M,{dataKey:"present",fill:"#10B981",radius:[4,4,0,0],name:"Present"}),e.jsx(M,{dataKey:"absent",fill:"#EF4444",radius:[4,4,0,0],name:"Absent"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(ne,{className:"mr-2 text-green-500",size:24}),"Today's Overall Status"]}),e.jsx(W,{width:"100%",height:300,children:e.jsxs(pt,{children:[e.jsx(ft,{data:w,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:w.map((l,x)=>e.jsx(gt,{fill:l.color},`cell-${x}`))}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"}}),e.jsx(Z,{})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8 hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(vt,{className:"mr-2 text-purple-500",size:24}),"Weekly Attendance Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Daily Trend"}),e.jsx(W,{width:"100%",height:300,children:e.jsxs(ra,{data:k,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPresent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})}),e.jsx(q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(U,{dataKey:"date",tick:{fontSize:12},stroke:"#6B7280"}),e.jsx(X,{stroke:"#6B7280"}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"}}),e.jsx(le,{type:"monotone",dataKey:"present",stroke:"#10B981",fillOpacity:1,fill:"url(#colorPresent)",strokeWidth:3}),e.jsx(le,{type:"monotone",dataKey:"absent",stroke:"#EF4444",fillOpacity:.6,fill:"#EF4444",strokeWidth:2})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Batch Performance"}),e.jsx(W,{width:"100%",height:300,children:e.jsxs(Q,{data:L,margin:{top:20,right:30,left:0,bottom:40},children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(U,{dataKey:"batch",tick:{fontSize:10},stroke:"#6B7280",angle:-45,textAnchor:"end",height:80}),e.jsx(X,{stroke:"#6B7280"}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"}}),e.jsx(M,{dataKey:"rate",fill:"#3B82F6",radius:[4,4,0,0],name:"Attendance %"})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(ye,{className:"mr-2 text-indigo-500",size:24}),"Monthly Batch Performance"]}),e.jsx(W,{width:"100%",height:350,children:e.jsxs(Q,{data:b,margin:{top:20,right:30,left:0,bottom:80},children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(U,{dataKey:"batch",tick:{fontSize:10},stroke:"#6B7280",angle:-45,textAnchor:"end",height:80}),e.jsx(X,{stroke:"#6B7280"}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},formatter:(l,x)=>[l,x.charAt(0).toUpperCase()+x.slice(1)]}),e.jsx(Z,{}),e.jsx(M,{dataKey:"present",fill:"#22C55E",radius:[4,4,0,0],name:"Present"}),e.jsx(M,{dataKey:"absent",fill:"#EF4444",radius:[4,4,0,0],name:"Absent"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition-shadow duration-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(ve,{className:"mr-2 text-orange-500",size:24}),"Yearly Batch Overview"]}),e.jsx(W,{width:"100%",height:350,children:e.jsxs(Q,{data:H,margin:{top:20,right:30,left:0,bottom:80},children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(U,{dataKey:"batch",tick:{fontSize:10},stroke:"#6B7280",angle:-45,textAnchor:"end",height:80}),e.jsx(X,{stroke:"#6B7280"}),e.jsx(F,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},formatter:(l,x)=>[x==="rate"?`${l}%`:l,x==="rate"?"Attendance Rate":x.charAt(0).toUpperCase()+x.slice(1)]}),e.jsx(Z,{}),e.jsx(M,{dataKey:"total",fill:"#8B5CF6",radius:[4,4,0,0],name:"Total Attendance"}),e.jsx(M,{dataKey:"rate",fill:"#F59E0B",radius:[4,4,0,0],name:"Success Rate %"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[e.jsx(ne,{className:"mr-2 text-blue-500",size:24}),"Monthly Batch Summary"]}),e.jsx("div",{className:"space-y-4",children:b.map((l,x)=>e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:l.batch}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.rate>=80?"bg-green-100 text-green-800":l.rate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[l.rate,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-600 font-bold text-lg",children:l.present}),e.jsx("div",{className:"text-gray-500",children:"Present"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 font-bold text-lg",children:l.absent}),e.jsx("div",{className:"text-gray-500",children:"Absent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold text-lg",children:l.students}),e.jsx("div",{className:"text-gray-500",children:"Students"})]})]})]},x))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[e.jsx(ve,{className:"mr-2 text-yellow-500",size:24}),"Yearly Batch Performance"]}),e.jsx("div",{className:"space-y-4",children:H.map((l,x)=>e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:l.batch}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.rate>=80?"bg-green-100 text-green-800":l.rate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[l.rate,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-600 font-bold text-lg",children:l.present}),e.jsx("div",{className:"text-gray-500",children:"Present"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 font-bold text-lg",children:l.absent}),e.jsx("div",{className:"text-gray-500",children:"Absent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold text-lg",children:l.total}),e.jsx("div",{className:"text-gray-500",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-purple-600 font-bold text-lg",children:l.students}),e.jsx("div",{className:"text-gray-500",children:"Students"})]})]})]},x))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[e.jsx(me,{className:"mr-2 text-green-500",size:24}),"Student Performance Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white text-center",children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:B}),e.jsx("div",{className:"text-blue-100",children:"Total Students"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white text-center",children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:h.present}),e.jsx("div",{className:"text-green-100",children:"Monthly Present"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white text-center",children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:h.absent}),e.jsx("div",{className:"text-red-100",children:"Monthly Absent"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white text-center",children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[K,"%"]}),e.jsx("div",{className:"text-purple-100",children:"Success Rate"})]})]})]})]})})}na.layout=a=>e.jsx(Ge,{children:a});export{na as default};
